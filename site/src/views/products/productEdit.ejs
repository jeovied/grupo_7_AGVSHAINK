<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head') %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body class="productEdit">
    <header>
        <%- include('../partials/header') %>
    </header>
    <main>
        <h2 class="title">editar producto</h2>
        <span id="error-empty" class="text-danger"></span>
                  <hr>
        <form action="/products/edit/<%= product.id %>?_method=PUT" method="POST" enctype="multipart/form-data" id="form-productEdit">
            <div class="mb-3">
                <label for="name" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="name" name="name" value="<%= locals.old && old.name ? old.name : product.name %>">
                <span id="error-name" class="text-danger" style="font-size: small;"><%= locals.errores && errores.name ? errores.name.msg : null %> </span> 
              </div>
              <div class="mb-3">
                <label for="price" class="form-label">Precio</label>
                <input type="number" class="form-control" id="price" name="price" value="<%= locals.old && old.price ? old.price : product.price %>">
                <span id="error-price" class="text-danger"style="font-size: small;"><%= locals.errores && errores.price ? errores.price.msg : null %> </span>
              </div>
              <div class="mb-3">
                <label for="category" class="form-label">Categoría</label>
    
                <select id="category" class="form-select" name="category">
                    <% categories.forEach(category => { %>
                        <option value="<%= category.id %>" <%= category.id === product.categories.id ? 'selected' : null %> ><%= category.name %></option>
                       <% }) %>
                  </select>
                  <span id="error-category" class="text-danger" style="font-size: small;"><%= locals.errores && errores.category ? errores.category.msg : null %> </span>
              </div>

              <div class="mb-3">
                <label for="genre" class="form-label">Genero</label>

                <select id="genre" class="form-select" name="genre">
                    <option value="masculino"  <%= product.genre === "masculino" ? 'selected' : null %> >Hombre</option>
                    <option value="femenino" <%= product.genre === "femenino" ? 'selected' : null %> >Mujer</option>
                </select>
                <span id="error-genre" class="text-danger" style="font-size: small;"><%= locals.errores && errores.genre ? errores.genre.msg : null %> </span>
              </div>

              <div class="mb-3">
                <label for="brand" class="form-label">Marca</label>

                <select id="brand" class="form-select" name="brand">
                    <% brands.forEach(brand => { %>
                      <option value="<%= brand.id %>" <%= brand.id === product.brands.id ? 'selected' : null %> ><%= brand.name %></option>
                    <% }) %>
                </select>
                <span id="error-brand" class="text-danger" style="font-size: small;"><%= locals.errores && errores.brand ? errores.brand.msg : null %> </span>
              </div>
                 <label for="formGroupExampleInput" class="form-label">Talles</label><br>
                    <% sizes.forEach(element => { %>
                        <div class="form-check form-check-inline mb-3">
                            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" name="size" value="<%= element.id %>">
                            <% product.sizes.forEach(item => { %>
                                <% if (element.id == item.id) { %>
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" name="size" value="<%= element.id %>" checked>
                                <% } %>
                            <% }) %>
                            <label class="form-check-label" for="inlineCheckbox1"><%= element.size %></label>
                        </div>
                    <% }) %>
                <div class="mb-3">
                <label for="description">Descripción</label>
                <textarea class="form-control" id="description" name="description" ><%= locals.old && old.description ? old.description : product.description %></textarea>
                <span id="error-description" class="text-danger" style="font-size: small;"><%= locals.errores && errores.description ? errores.description.msg : null %> </span>
              </div>
              <div class="mb-3">
                <label for="images" class="form-label">Imagen</label>
                <input type="file" class="form-control" id="images" name="images" accept="image/*" multiple>
                <span id="error-images" class="text-danger" style="font-size: small;"><%= locals.errores && errores.images ? errores.images.msg : null %><%= typeof error != 'undefined' ? errores : null %> </span>
              </div>
              
              
              <button class="btn btn-primary" type="submit" style="margin: 20px auto; display: flex; justify-content: center; flex-direction: column; align-items: center;">Guardar</button>
        </form>
            
    </main>
    <div>
        <article class="insta">
            <i class="fab fa-instagram"></i>
            <h3>instagram</h3>
        </article>
    </div>
    <footer>
        <%- include('../partials/footer') %>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="/javascripts/productEditValidator.js"></script>
</body>

</html>